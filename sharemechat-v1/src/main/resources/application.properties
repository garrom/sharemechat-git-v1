# =========================================================
# App
# =========================================================
spring.application.name=sharemechat-v1

# =========================================================
# Server / Interfaces
# =========================================================
server.address=0.0.0.0
server.port=8080
server.forward-headers-strategy=native

# =========================================================
# DataSource (MySQL)
# =========================================================
spring.datasource.url=jdbc:mysql://db1-sharemechat.c1gsc6qg4l8y.eu-central-1.rds.amazonaws.com:3306/db1-sharemechat
spring.datasource.username=admin
spring.datasource.password=Zabaleta&#15
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# =========================================================
# AUTH
# =========================================================
auth.cookieDomain=.test.sharemechat.com
auth.secureCookies=true

# =========================================================
# JPA / Hibernate
# =========================================================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.open-in-view=false

# =========================================================
# Redis (provisional)
# =========================================================
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.password=
stream.status.ttl-seconds=45

# =========================================================
# Matching Next
# =========================================================
matching.next.limit-per-window=20
matching.next.window-seconds=60

# =========================================================
# Seen TTL
# =========================================================
matching.seen.ttl-minutes=45
matching.seen.max-scan=60

# =========================================================
# Logging
# =========================================================
logging.level.org.springframework=INFO
logging.level.org.springframework.web.socket=WARN
logging.level.org.springframework.security=WARN
# Hibernate SQL / binds
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.orm.jdbc.bind=WARN
logging.level.org.hibernate.type.descriptor.sql=WARN
# Handlers a INFO para ver lo importante sin pings
logging.level.com.sharemechat.handler=INFO
logging.level.com.sharemechat.service=INFO
logging.level.com.sharemechat.ws=INFO

# =========================================================
# SECURITY RATE LIMIT
# =========================================================
security.ratelimit.login.limit=5
security.ratelimit.login.window-seconds=300
security.ratelimit.reset.limit=5
security.ratelimit.reset.window-seconds=900
security.ratelimit.register.limit=5
security.ratelimit.register.window-seconds=900
security.ratelimit.refresh.limit=60
security.ratelimit.refresh.window-seconds=300

# =========================================================
# WS RATE LIMIT (/messages)
# =========================================================
security.ratelimit.ws.msg.limit=20
security.ratelimit.ws.msg.window-seconds=10
security.ratelimit.ws.call.limit=5
security.ratelimit.ws.call.window-seconds=60
security.ratelimit.ws.ping.limit=30
security.ratelimit.ws.ping.window-seconds=10

# =========================================================
# JWT
# =========================================================
jwt.secret=7xsxBxUIczchw25rgAECjaFKtPNeCjO93BBIQl7VQyPDgj7sGkwAVMg5HHSy2MQ0DBR4T4tp701p9gji+ZiOQg==
jwt.expiration=900000
jwt.refresh-expiration=1209600000

# =========================================================
# Multipart / Upload limits (Spring)
# =========================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=60MB

# =========================================================
# WebSocket (buffers)
# =========================================================
spring.web-socket.max-text-message-buffer-size=32768
spring.web-socket.max-binary-message-buffer-size=32768

# =========================================================
# Facturación
# =========================================================
billing.rate-per-minute=1.00
billing.cutoff-threshold-eur=1.00
gift.model-share=0.90

# =========================================================
# Password reset
# =========================================================
password-reset.ttl-minutes=30
app.frontend.reset-url=https://test.sharemechat.com/reset-password

# =========================================================
# Storage (local)
# =========================================================
app.storage.type=local
app.storage.local.root=/usr/share/nginx/html/uploads
app.storage.allowed-extensions=jpg,jpeg,png,webp,gif,mp4,webm,pdf
app.storage.max-file-size-bytes=52428800
app.storage.max-basename-length=80

# =========================================================
# CONSENT / AGE-GATE
# =========================================================
consent.hmacSecret=change-me-to-a-long-random-hex-or-base64-secret-at-least-64-chars
consent.retentionDays=180
terms.version=v1

# =========================================================
# MODEL CONTRACT
# =========================================================
modelContract.version=model_contract_v1_2026-02-15
modelContract.sha256=8E69C46D6282C4686F1F496A14EFBDC6B1F57822C9BDB1A7805FAFEB0C763386
modelContract.url=https://assets.sharemechat.com/legal/model_contract_v1_2026-02-15.pdf

# =========================================================
# LEGAL DOCS (single source of truth for public links)
# =========================================================
legal.baseUrl=https://assets.sharemechat.com/legal
legal.privacyPath=/privacy_policy.pdf
legal.cookiePath=/cookie_policy.pdf
legal.modelContractPath=/model_contract.pdf
legal.termsPath=/terms_of_service.pdf